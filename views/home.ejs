<div style="display: flex; min-height: 100vh;">
  <%- include('layouts/nav') %>

  <main class="container py-4" style="flex-grow: 1;">
    <!-- Header -->
    <%- include('layouts/header-main') %>
    
    <!-- Summary Cards -->
    <div class="row mb-4">
      <div class="col-md-3 mb-3">
        <div class="card text-white bg-primary h-100">
          <div class="card-body">
            <h5 class="card-title">Guru/Admin</h5>
            <p class="card-text fs-3">10</p>
          </div>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="card text-white bg-success h-100">
          <div class="card-body">
            <h5 class="card-title">Siswa</h5>
            <p class="card-text fs-3">200</p>
          </div>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="card text-white bg-info h-100">
          <div class="card-body">
            <h5 class="card-title">Orang Tua</h5>
            <p class="card-text fs-3">190</p>
          </div>
        </div>
      </div>
      <div class="col-md-3 mb-3">
        <div class="card text-white bg-warning h-100">
          <div class="card-body">
            <h5 class="card-title">Sesi Aktif</h5>
            <p class="card-text fs-3">2</p>
          </div>
        </div>
      </div>
    </div>

  <!-- Ringkasan Aktivitas Hari Ini -->
<div class="row mb-4">
  <div class="col-md-6 mb-3">
    <div class="card h-100">
      <div class="card-header bg-light">
        Aktivitas Hari Ini
      </div>
      <div class="card-body">
        <ul class="list-group list-group-flush">
          <li class="list-group-item">Absensi Tercatat: <strong>180</strong> siswa</li>
          <li class="list-group-item">Sesi Berlangsung: <strong>2</strong></li>
          <li class="list-group-item">Guru Login Hari Ini: <strong>5</strong></li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Grafik Ringkas (Placeholder) -->
  <div class="col-md-6 mb-3">
    <div class="card h-100">
      <div class="card-header bg-light">
        Statistik Mingguan
      </div>
      <div class="card-body">
        <canvas id="chartMingguan" height="150"></canvas>
      </div>
    </div>
  </div>
</div>

<!-- Log Aktivitas Terakhir dengan Scrollspy -->
<div class="mb-4">
  <h4>Aktivitas Terakhir</h4>
  <div class="scrollspy-log border rounded" style="max-height: 200px; overflow-y: auto;">
    <ul class="list-group list-group-flush">
      <li class="list-group-item">[08:10] Siswa <strong>Rina</strong> melakukan absen</li>
      <li class="list-group-item">[08:05] Guru <strong>Pak Dedi</strong> membuat sesi baru</li>
      <li class="list-group-item">[07:50] Admin <strong>Bu Rani</strong> menambahkan siswa baru</li>
      <li class="list-group-item">[07:45] Siswa <strong>Andi</strong> melakukan absen</li>
      <li class="list-group-item">[07:40] Admin <strong>Bu Wati</strong> menghapus sesi lama</li>
      <!-- Tambahkan log lainnya di sini -->
    </ul>
  </div>
</div>

  <!-- Absensi Hari Ini & Sesi Berlangsung -->
  <!-- <div class="row mb-4">
    <div class="col-md-6 mb-3">
      <div class="card h-100">
        <div class="card-header">
          Absensi Hari Ini
        </div>
        <div class="card-body">
          <p>Sudah Absen: 180 siswa</p>
          <p>Belum Absen: 20 siswa</p>
          <div class="progress">
            <div class="progress-bar" style="width: 90%;">90%</div>
          </div>
        </div>
      </div>
    </div> -->

    <!-- <div class="col-md-6 mb-3">
      <div class="card h-100">
        <div class="card-header">
          Sesi Berlangsung
        </div>
        <div class="card-body">
          <h5>Kelas X - Matematika</h5>
            <p>Hingga 09:30 - 12/04/2025</p>
          <span class="badge bg-success">Sedang Berlangsung</span>
        </div>
      </div>
    </div>
  </div> -->
  
  <!-- Aksi Cepat -->
  <div class="mb-4">
    <h4>Aksi Cepat</h4>
    <div class="d-flex flex-wrap gap-2">
      <a href="#" class="btn btn-primary">Tambah Guru</a>
      <a href="#" class="btn btn-success">Tambah Siswa</a>
      <a href="#" class="btn btn-warning">Buat Sesi Baru</a>
      <a href="#" class="btn btn-info">Lihat Laporan</a>
    </div>
  </div>

  <!-- Foto Absensi Terbaru -->
  <!-- <div class="mb-4">
    <h4>Absensi Terbaru (Kelas X - Matematika)</h4>
    <div class="row">
      <div class="col-6 col-md-3 mb-3">
        <div class="card">
          <img src="img/shiroko.jpg" class="card-img-top" alt="Foto Siswa 1" style="height: 300px; object-fit: cover;">
          <div class="card-body">
            <h6 class="card-title">Andi Saputra</h6>
            <p class="card-text"><small>Pos A</small> | <small>08:05</small></p>
          </div>
        </div>
      </div>
      <div class="col-6 col-md-3 mb-3">
        <div class="card">
          <img src="img/logo_sekolah.png" class="card-img-top" alt="Foto Siswa 2" style="height: 300px; object-fit: cover;">
          <div class="card-body">
            <h6 class="card-title">Budi Santoso</h6>
            <p class="card-text"><small>Pos B</small> | <small>08:10</small></p>
          </div>
        </div>
      </div>
    </div>
  </div> -->

  <!-- Notifikasi -->
  <div class="mb-4">
    <div class="alert alert-danger" role="alert">
      Perhatian! 2 siswa belum melakukan absensi hari ini.
    </div>
  </main>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById('chartMingguan').getContext('2d');
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['Sen', 'Sel', 'Rab', 'Kam', 'Jum'],
      datasets: [{
        label: 'Jumlah Absen',
        data: [120, 130, 125, 140, 150],
        backgroundColor: 'rgba(54, 162, 235, 0.7)'
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });
</script>
